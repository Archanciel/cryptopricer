    # ---------- cryptopricerguy.kv  ----------

# Reference cryptopricerguy.py
#: import main cryptopricerguy
#: import ListAdapter kivy.adapters.listadapter.ListAdapter
#: import ListItemButton kivy.uix.listview.ListItemButton
#: import ScrollEffect kivy.effects.scroll.ScrollEffect


CryptoPricerGUY:

<CryptoPricerGUY>:
    orientation: "vertical"
    commandInput: command
    commandList: commandListView
    resultOutput: readOnlyLog
    toggleHistoControl: toggleHistoryBtn
    deleteControl: deleteBtn
    replaceControl: replaceBtn
    replayAllControl: replayAllBtn
    #loadCommands: loadCommands
    #saveCommands: saveCommands
    padding: 10
    spacing: 10
    canvas.before:
        Color:
            rgb: [0.22,0.22,0.22]
        Rectangle:
            pos: self.pos
            size: self.size
          
    BoxLayout:
        size_hint_y: None
        ActionBar:
            pos_hint: {'top':1}
            ActionView:
                use_separator: True
                ActionPrevious:
                    title: 'prev'
                    with_previous: False
                ActionOverflow:
                    ActionButton:
                        text: 'Load hist'
                        on_press: root.loadCommands()
                    ActionButton:
                        text: 'Save hist'
                        on_press: root.saveCommands()
            
    BoxLayout:
        size_hint_y: None
        height: "28dp"
        canvas.before:
            Color:
                rgb: [0,0,0]
            Rectangle:
                pos: self.pos
                size: self.size

        TextInput:
            id: command
            background_color: 0,0,0,0
            foreground_color: 1,1,1,1
            focus: True
            #ENTER triggers root.submitCommand()
            multiline: False
            on_text_validate: root.submitCommand()

    BoxLayout:
        size_hint_y: None
        height: "28dp"
        ToggleButton:
            id: toggleHistoryBtn
            text: "History"
            size_hint_x: 15
            disabled:True
            on_press: root.toggleCommandList()
        Button:
            id: deleteBtn
            text: "Delete"
            size_hint_x: 15
            disabled: True
            on_press: root.deleteCommand()
        Button:
            id: replaceBtn
            text: "Replace"
            size_hint_x: 15
            disabled: True
            on_press: root.replaceCommand()
        Button:
            id: replayAllBtn
            text: "Replay All"
            size_hint_x: 15
            disabled: True
            on_press: root.replayAllCommands()

    # Define starting data and point to the ListItemButton
    # in the Python code
    ListView:
        id: commandListView
        effect_cls: ScrollEffect #no effect !
        adapter: ListAdapter(data=[], cls=main.CommandListButton, args_converter=lambda row_index,rec: {'text':rec, 'on_press':root.historyItemSelected})
        height: '0dp'
        size_hint_y: None
        canvas.before:
            Color:
                rgb: [0,0,0]
            Rectangle:
                pos: self.pos
                size: self.size

    ScrollView:
        id: scrlv
        size_hint: (1, 1)
        canvas.before:
            Color:
                rgb: [0,0,0]
            Rectangle:
                pos: self.pos
                size: self.size
        effect_cls: ScrollEffect #avoid overscrolling
        TextInput:
            id: readOnlyLog
            size_hint: (1, None)
            height: max(self.minimum_height, scrlv.height) #required to enable scrolling when list starts to grow
            readonly: True
            background_color: 0,0,0,0
            foreground_color: 1,1,1,1
